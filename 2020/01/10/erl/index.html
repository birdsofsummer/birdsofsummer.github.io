<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <!--base target="_blank" /-->
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta name="referrer" content="never">
  <meta name="keywords" content>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="shortcut icon" href="https://image.flaticon.com/icons/png/512/346/346195.png" type="image/x-icon">


  <link href="https://spin.js.org/spin.css" type="text/css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons" rel="stylesheet">
<link href="https://cdn.bootcss.com/material-design-icons/3.0.1/iconfont/material-icons.min.css" rel="stylesheet">

  <link href="https://cdn.bootcss.com/vuetify/2.0.0-beta.3/vuetify.css" rel="stylesheet">
  <link href="/css/grid.css" type="text/css" rel="stylesheet">
  <link href="/css/blog.css" type="text/css" rel="stylesheet">

  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/spin.js/2.3.2/spin.min.js"></script>
  <script src="https://cdn.bootcss.com/localforage/1.7.3/localforage.min.js"></script>
  <script src="https://cdn.bootcss.com/ramda/0.26.1/ramda.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.16.1/lodash.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>
  <script src="https://cdn.bootcss.com/moment.js/2.24.0/moment.min.js"></script>
  <script src="https://cdn.bootcss.com/limonte-sweetalert2/8.11.8/sweetalert2.all.min.js"></script>
  <script src="https://cdn.bootcss.com/superagent/4.1.0-beta.1/superagent.min.js"></script>
  <script src="https://cdn.bootcss.com/rxjs/6.5.2/rxjs.umd.min.js"></script>
  <script src="https://cdn.bootcss.com/clipboard.js/2.0.4/clipboard.min.js"></script>
  <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
  <script src="https://cdn.bootcss.com/vuetify/2.0.0-beta.3/vuetify.js"></script>
  
  <script src="https://cdn.bootcss.com/pixi.js/5.0.4/pixi.min.js"></script>
  <script src="https://cdn.bootcss.com/d3/5.9.7/d3.min.js"></script>
  <script src="https://cdn.bootcss.com/three.js/r83/three.min.js"></script>
  <script src="https://cdn.bootcss.com/marked/0.7.0/marked.min.js"></script>
  <script src="https://cdn.bootcss.com/push.js/1.0.9/push.min.js"></script>
  <script src="https://cdn.bootcss.com/linq.js/2.2.0.2/linq.min.js"></script>
  <script src="https://cdn.bootcss.com/tensorflow/1.2.2/tf.min.js"></script>
  <script src="https://cdn.bootcss.com/typescript/3.5.3/typescript.min.js"></script>
  <script src="https://cdn.bootcss.com/reflect-metadata/0.1.13/Reflect.min.js"></script>
  <script src="https://cdn.bootcss.com/socket.io/2.2.0/socket.io.dev.js"></script>
  <script src="https://cdn.bootcss.com/immutable/4.0.0-rc.12/immutable.min.js"></script>
  <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts-en.common.min.js"></script>
  <script src="/js/blog.js" type="module"></script>


  <!--%- partial('google-analytics') %-->
  
  <title>blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Making reliable distributed systems in the presence of sodware errors ,Joe Armstrong #Erlang pattern123456789101112131415161718&amp;#123;P1,P2,...,Pn&amp;#125;=&amp;#123;T1,T2,...,Tn&amp;#125;&amp;#123;P,abcd&amp;#125;=&amp;#123">
<meta property="og:type" content="article">
<meta property="og:title" content="blog">
<meta property="og:url" content="https://birdsofsummer.github.io/2020/01/10/erl/index.html">
<meta property="og:site_name" content="blog">
<meta property="og:description" content="Making reliable distributed systems in the presence of sodware errors ,Joe Armstrong #Erlang pattern123456789101112131415161718&amp;#123;P1,P2,...,Pn&amp;#125;=&amp;#123;T1,T2,...,Tn&amp;#125;&amp;#123;P,abcd&amp;#125;=&amp;#123">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2020-01-10T10:20:08.385Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="blog">
<meta name="twitter:description" content="Making reliable distributed systems in the presence of sodware errors ,Joe Armstrong #Erlang pattern123456789101112131415161718&amp;#123;P1,P2,...,Pn&amp;#125;=&amp;#123;T1,T2,...,Tn&amp;#125;&amp;#123;P,abcd&amp;#125;=&amp;#123">
  
    <link rel="alternate" href="/atom.xml" title="blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <!--link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"-->
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://birdsofsummer.github.io"></form>
      </div>
    </div>
  </div>
  <section class="loading"><section>
</header>

      <div class="outer">
        <section id="main"><article id="post-erl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/10/erl/" class="article-date">
  <time datetime="2020-01-10T10:20:08.385Z" itemprop="datePublished">2020-01-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Making reliable distributed systems in the presence of sodware errors ,Joe Armstrong</p>
<p>#Erlang</p>
<h3 id="pattern"><a href="#pattern" class="headerlink" title="pattern"></a>pattern</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;P1,P2,...,Pn&#125;=&#123;T1,T2,...,Tn&#125;</span><br><span class="line">&#123;P,abcd&#125;=&#123;<span class="number">123</span>,abcd&#125;.</span><br><span class="line">[H|T]=[<span class="number">79</span>,<span class="number">116</span>].</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;P,abc,<span class="number">123</span>&#125; <span class="keyword">when</span>    P == G,...</span><br><span class="line">                    X &gt; Y</span><br><span class="line">                    X &lt; Y</span><br><span class="line">                    X =&lt; Y</span><br><span class="line">                    X &gt;= Y</span><br><span class="line">                    X == Y</span><br><span class="line">                    X /= Y</span><br><span class="line">                    X =:= Y</span><br><span class="line">                    X =/= Y</span><br><span class="line"></span><br><span class="line">&#123;X,a,X,[B|X]&#125; </span><br><span class="line"><span class="comment">%&#123;X,a,F1,[B|F2]&#125; when F1==X, F2==X</span></span><br></pre></td></tr></table></figure>

<h3 id="function"><a href="#function" class="headerlink" title="function"></a>function</h3><pre><code>F(P11,...,P1N) when G11,...,G1N -&gt; Body1;
F(P21,...,P2N) when G11,...,G1N -&gt; Body2;
....
F(PK1, PK2, ..., PKN) -&gt; BodyK.</code></pre><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">factorial</span><span class="params">(<span class="number">0</span>)</span> -&gt;</span> <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="title">factorial</span><span class="params">(N)</span> -&gt;</span> N * factorial(N-<span class="number">1</span>).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">member</span><span class="params">(H, [H|T])</span> -&gt;</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">%member(H, [H1|_]) when H == H1 -&gt; true;</span></span><br><span class="line"><span class="function"><span class="title">member</span><span class="params">(H, [_|T] -&gt; member(H, T);</span></span></span><br><span class="line"><span class="function"><span class="params">member(H, []) -&gt; false.</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="comment">%%member(dog, [cat,man,dog,ape]) </span></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">deposit(Who, Money) -&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">Old = lookup(Who),</span></span></span><br><span class="line"><span class="function"><span class="params">New = Old + Money,</span></span></span><br><span class="line"><span class="function"><span class="params">insert(Who, New),</span></span></span><br><span class="line"><span class="function"><span class="params">New.</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="comment">%%deposit(joe, 25)</span></span></span></span><br></pre></td></tr></table></figure>

<h3 id="tail-recursive"><a href="#tail-recursive" class="headerlink" title="tail-recursive"></a>tail-recursive</h3><pre><code>fn(X1,Tails...)
fn(X2,Tails...)
fn(X3,Tails...)</code></pre><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">factorial</span><span class="params">(<span class="number">0</span>)</span> -&gt;</span> <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="title">factorial</span><span class="params">(N)</span> -&gt;</span> N * factorial(N-<span class="number">1</span>).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%%tail</span></span><br><span class="line"><span class="function"><span class="title">factorial</span><span class="params">(N)</span> -&gt;</span> factorial_1(N, <span class="number">1</span>).</span><br><span class="line"><span class="function"><span class="title">factorial_1</span><span class="params">(<span class="number">0</span>, X)</span> -&gt;</span> X;</span><br><span class="line"><span class="function"><span class="title">factorial_1</span><span class="params">(N, X)</span> -&gt;</span> factorial_1(N-<span class="number">1</span>, N*X).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">loop</span><span class="params">(Dict)</span> -&gt;</span></span><br><span class="line">    <span class="keyword">receive</span></span><br><span class="line">        &#123;store, Key, Value&#125; -&gt; loop(dict:store(Key, Value, Dict));</span><br><span class="line">        &#123;From, &#123;get, Key&#125;&#125; -&gt; From ! dict:fetch(Key, Dict), loop(Dict)</span><br><span class="line">    <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

<h3 id="case"><a href="#case" class="headerlink" title="case"></a>case</h3><pre><code>case Expression of
Pattern1 -&gt; Expr_seq1;
Pattern2 -&gt; Expr_seq2;
...
end</code></pre><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><pre><code>if
    Guard1 -&gt;
        Expr_seq1;
    Guard2 -&gt;
        Expr_seq2;
    ...
end</code></pre><h3 id="Higher-order-functions"><a href="#Higher-order-functions" class="headerlink" title="Higher order functions"></a>Higher order functions</h3><pre><code>F=fun(I) -&gt; ...I end
map(F, [H|T]) -&gt; [F(H)|map(F, T)];
map(F, []) -&gt; [].</code></pre><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">lists:map(<span class="keyword">fun</span>(I) -&gt; <span class="number">2</span> *I <span class="keyword">end</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(I, Max, F, Sum)</span> <span class="title">when</span> I &lt; M<span class="title">ax</span> -&gt;</span> for(I+<span class="number">1</span>, Max, F, Sum + F(I));</span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(I, Max, F, Sum)</span> -&gt;</span> Sum.</span><br><span class="line">Sum0 = <span class="number">0</span>,Sum = for(<span class="number">0</span>, Max, F, Sum0).</span><br><span class="line"><span class="comment">%curry</span></span><br><span class="line"><span class="comment">%f(X1)-&gt;f(X2)-&gt;...end end</span></span><br><span class="line"></span><br><span class="line">Adder = <span class="keyword">fun</span>(X) -&gt; <span class="keyword">fun</span>(Y) -&gt; X + Y <span class="keyword">end</span> <span class="keyword">end</span>.</span><br><span class="line">Adder10 = Adder(<span class="number">10</span>).</span><br><span class="line">Adder10(<span class="number">5</span>).</span><br><span class="line"></span><br><span class="line"><span class="comment">% lambda</span></span><br><span class="line">Fact = <span class="keyword">fun</span>(X) -&gt;</span><br><span class="line">            G = <span class="keyword">fun</span>(<span class="number">0</span>,F) -&gt; <span class="number">1</span>;</span><br><span class="line">                    (N, F) -&gt; N*F(N-<span class="number">1</span>,F)</span><br><span class="line">                <span class="keyword">end</span>,</span><br><span class="line">            G(X, G)</span><br><span class="line">        <span class="keyword">end</span>.</span><br><span class="line">Fact(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">X = <span class="keyword">fun</span> foo/<span class="number">2</span> </span><br><span class="line"><span class="comment">%X = fun(I, J) -&gt; foo(I, J) end</span></span><br></pre></td></tr></table></figure>

<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><pre><code>[X || Qualifier1, Qualifier2, ...]</code></pre><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> qsort([]) -&gt; [];</span><br><span class="line"> qsort([Pivot|T]) -&gt;</span><br><span class="line"> qsort([X||X&lt;-T,X =&lt; Pivot]) ++ [Pivot] ++ qsort([X||X&lt;-T,X &gt; Pivot]).  <span class="comment">% =&lt;</span></span><br><span class="line"></span><br><span class="line"> perms([]) -&gt; [[]];</span><br><span class="line"> perms(L) -&gt; [[H|T] || H &lt;- L, T &lt;- perms(L--[H])].</span><br><span class="line"></span><br><span class="line"><span class="comment">% perms("123").</span></span><br><span class="line"><span class="comment">% ["123","132","213","231","312","321"]</span></span><br></pre></td></tr></table></figure>

<h3 id="binary"><a href="#binary" class="headerlink" title="binary"></a>binary</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">B1=list_to_binary([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]).</span><br><span class="line">B2=list_to_binary([<span class="number">4</span>,<span class="number">5</span>,[<span class="number">6</span>,<span class="number">7</span>],[],[<span class="number">8</span>,[<span class="number">9</span>]],<span class="number">245</span>]).</span><br><span class="line">B3=concat_binary([B1,B2]).</span><br><span class="line"><span class="function"><span class="title">split_binary</span><span class="params">(B3,<span class="number">6</span>)</span>.</span></span><br><span class="line"><span class="function">B = <span class="title">term_to_binary</span><span class="params">(&#123;hello,<span class="string">"joe"</span>&#125;)</span>.</span></span><br><span class="line"><span class="function"><span class="title">binary_to_term</span><span class="params">(B)</span>.</span></span><br></pre></td></tr></table></figure>

<h3 id="bit"><a href="#bit" class="headerlink" title="bit"></a>bit</h3><p>&lt;<a href="Value:Size/TypeSpecifierList" target="_blank" rel="noopener">Value:Size/TypeSpecifierList</a>&gt;<br>            End-Sign-Type-Unit<br>            big/little/native - signed/unsigned - integer/float/binary - 1..256</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">X=<span class="number">1</span>,Y1=<span class="number">1</span>,Y2=<span class="number">255</span>,Y3=<span class="number">256</span>,Z=<span class="number">1</span>.</span><br><span class="line">&lt;&lt;X,Y1,Z&gt;&gt;.</span><br><span class="line">&lt;&lt;X,Y2,Z&gt;&gt;.</span><br><span class="line">&lt;&lt;X,Y3,Z&gt;&gt;.</span><br><span class="line">&lt;&lt;X,Y3:<span class="number">16</span>,Z&gt;&gt;.</span><br><span class="line">&lt;&lt;X,Y3:<span class="number">32</span>,Z&gt;&gt;.</span><br><span class="line">&lt;&lt;<span class="number">256</span>:<span class="number">32</span>&gt;&gt;.</span><br><span class="line">&lt;&lt;<span class="number">256</span>:<span class="number">32</span>/big&gt;&gt;.</span><br><span class="line">&lt;&lt;<span class="number">256</span>:<span class="number">32</span>/little&gt;&gt;.</span><br><span class="line">&lt;&lt;<span class="number">1</span>:<span class="number">1</span>,<span class="number">2</span>:<span class="number">7</span>&gt;&gt;.</span><br><span class="line">&lt;&lt;X:<span class="number">1</span>,Y:<span class="number">7</span>&gt;&gt; = &lt;&lt;<span class="number">130</span>&gt;&gt;.</span><br><span class="line">X.</span><br><span class="line">Y.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(IP_VERSION, <span class="number">4</span>)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(IP_MIN_HDR_LEN, <span class="number">5</span>)</span>.</span><br><span class="line"><span class="comment">%...</span></span><br><span class="line">DgramSize = size(Dgram),</span><br><span class="line"><span class="keyword">case</span> Dgram <span class="keyword">of</span></span><br><span class="line">    &lt;&lt;?IP_VERSION:<span class="number">4</span>, HLen:<span class="number">4</span>, SrvcType:<span class="number">8</span>, TotLen:<span class="number">16</span>,</span><br><span class="line">    ID:<span class="number">16</span>, Flgs:<span class="number">3</span>, FragOff:<span class="number">13</span>,</span><br><span class="line">    TTL:<span class="number">8</span>, Proto:<span class="number">8</span>, HdrChkSum:<span class="number">16</span>,</span><br><span class="line">    SrcIP:<span class="number">32</span>,</span><br><span class="line">    DestIP:<span class="number">32</span>, RestDgram/binary&gt;&gt; <span class="keyword">when</span> HLen &gt;= <span class="number">5</span>, <span class="number">4</span>*HLen =&lt; DgramSize -&gt;</span><br><span class="line">        OptsLen = <span class="number">4</span>*(HLen - ?IP_MIN_HDR_LEN),</span><br><span class="line">        &lt;&lt;Opts:OptsLen/binary,Data/binary&gt;&gt; = RestDgram,</span><br><span class="line">        <span class="comment">%...</span></span><br></pre></td></tr></table></figure>

<h3 id="Records"><a href="#Records" class="headerlink" title="Records"></a>Records</h3><p>-record(Name, {<br>                Key1 = Default1,<br>                Key2 = Default2,<br>                …<br>              }).</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-record</span><span class="params">(person, &#123;</span></span><br><span class="line"><span class="params">                firstName=<span class="string">""</span>,</span></span><br><span class="line"><span class="params">                lastName = <span class="string">""</span>,</span></span><br><span class="line"><span class="params">                age&#125;)</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Person = #person&#123;</span><br><span class="line">                    firstName=<span class="string">"Rip"</span>,</span><br><span class="line">                    lastname=<span class="string">"Van Winkle"</span>,</span><br><span class="line">                    age=<span class="number">793</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">birthday</span><span class="params">(X=#person&#123;age=N&#125;)</span> -&gt;</span> X#person&#123;age=N+<span class="number">1</span>&#125;.</span><br></pre></td></tr></table></figure>

<h3 id="Macros"><a href="#Macros" class="headerlink" title="Macros"></a>Macros</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-define</span><span class="params">(Constant, Replacement)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(Func(Var1, Var2,.., Var)</span>, Replacement).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(macro1(X, Y), &#123;a, X, Y&#125;)</span>.</span><br><span class="line"><span class="keyword">-define</span><span class="params">(start, &#123;).</span></span><br><span class="line"><span class="params">-define(stop, &#125;).</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">foo(A) -&gt;</span></span><br><span class="line"><span class="params">    ?macro1(A+<span class="number">10</span>, b) </span></span><br><span class="line"><span class="params">    <span class="comment">%&#123;a,A+10,b&#125;. </span></span></span><br><span class="line"><span class="params">foo(A) -&gt;</span></span><br><span class="line"><span class="params">?start,a,?stop. <span class="comment">%&#123;...&#125;</span></span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">?FILE</span></span><br><span class="line"><span class="params">?MODULE</span></span><br><span class="line"><span class="params">?LINE</span></span><br></pre></td></tr></table></figure>

<h3 id="Include-files"><a href="#Include-files" class="headerlink" title="Include files"></a>Include files</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">-include</span><span class="params">(Filename)</span>.</span><br><span class="line"><span class="keyword">-include_lib</span><span class="params">(Name)</span>.</span><br><span class="line"><span class="keyword">-include_lib</span><span class="params">(<span class="string">"kernel/include/file.hrl"</span>)</span>.</span><br></pre></td></tr></table></figure>

<h3 id="module"><a href="#module" class="headerlink" title="module"></a>module</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(math)</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([areas/<span class="number">1</span>])</span>.  <span class="comment">%% math:areas(...)</span></span><br><span class="line"><span class="keyword">-import</span><span class="params">(lists, [map/<span class="number">2</span>])</span>. <span class="comment">%% lists:map</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">areas</span><span class="params">(L)</span> -&gt;</span> lists:sum( map( <span class="keyword">fun</span>(I) -&gt; area(I) <span class="keyword">end</span>, L)). </span><br><span class="line"><span class="function"><span class="title">area</span><span class="params">(&#123;square, X&#125;)</span> -&gt;</span> X*X;</span><br><span class="line"><span class="function"><span class="title">area</span><span class="params">(&#123;rectangle,X,Y&#125;)</span> -&gt;</span> X*Y.</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">erl</span><br><span class="line">c(math).</span><br><span class="line">math : areas([&#123;rectangle, 12, 4&#125;, &#123;square, 6&#125;]).</span><br></pre></td></tr></table></figure>

<p> erlang:<br>‘!’/2                              ‘*’/2<br>‘+’/1                              ‘+’/2<br>‘++’/2                             ‘-‘/1<br>‘-‘/2                              ‘–’/2<br>‘/‘/2                              ‘/=’/2<br>‘&lt;’/2                              ‘=/=’/2<br>‘=:=’/2                            ‘=&lt;’/2<br>‘==’/2                             ‘&gt;’/2<br>‘&gt;=’/2                             ‘and’/2<br>‘band’/2                           ‘bnot’/1<br>‘bor’/2                            ‘bsl’/2<br>‘bsr’/2                            ‘bxor’/2<br>‘div’/2                            ‘not’/1<br>‘or’/2                             ‘rem’/2<br>‘xor’/2                            abs/1<br>adler32/1                          adler32/2<br>adler32_combine/3                  alloc_info/1<br>alloc_sizes/1                      append/2<br>append_element/2                   apply/2<br>apply/3                            atom_to_binary/2<br>atom_to_list/1                     binary_part/2<br>binary_part/3                      binary_to_atom/2<br>binary_to_existing_atom/2          binary_to_float/1<br>binary_to_integer/1                binary_to_integer/2<br>binary_to_list/1                   binary_to_list/3<br>binary_to_term/1                   binary_to_term/2<br>bit_size/1                         bitsize/1<br>bitstring_to_list/1                bump_reductions/1<br>byte_size/1                        call_on_load_function/1<br>cancel_timer/1                     cancel_timer/2<br>ceil/1                             check_old_code/1<br>check_process_code/2               check_process_code/3<br>convert_time_unit/3                crasher/6<br>crc32/1                            crc32/2<br>crc32_combine/3                    date/0<br>decode_packet/3                    delay_trap/2<br>delete_element/2                   delete_module/1<br>demonitor/1                        demonitor/2<br>disconnect_node/1                  display/1<br>display_nl/0                       display_string/1<br>dist_ctrl_get_data/1               dist_ctrl_get_data_notification/1<br>dist_ctrl_input_handler/2          dist_ctrl_put_data/2<br>dist_get_stat/1                    dmonitor_node/3<br>dt_append_vm_tag_data/1            dt_get_tag/0<br>dt_get_tag_data/0                  dt_prepend_vm_tag_data/1<br>dt_put_tag/1                       dt_restore_tag/1<br>dt_spread_tag/1                    element/2<br>erase/0                            erase/1<br>error/1                            error/2<br>exit/1                             exit/2<br>exit_signal/2                      external_size/1<br>external_size/2                    finish_after_on_load/2<br>finish_loading/1                   float/1<br>float_to_binary/1                  float_to_binary/2<br>float_to_list/1                    float_to_list/2<br>floor/1                            format_cpu_topology/1<br>fun_info/1                         fun_info/2<br>fun_info_mfa/1                     fun_to_list/1<br>function_exported/3                garbage_collect/0<br>garbage_collect/1                  garbage_collect/2<br>garbage_collect_message_area/0     gather_gc_info_result/1<br>get/0                              get/1<br>get_cookie/0                       get_keys/0<br>get_keys/1                         get_module_info/1<br>get_module_info/2                  get_stacktrace/0<br>group_leader/0                     group_leader/2<br>halt/0                             halt/1<br>halt/2                             has_prepared_code_on_load/1<br>hd/1                               hibernate/3<br>insert_element/3                   integer_to_binary/1<br>integer_to_binary/2                integer_to_list/1<br>integer_to_list/2                  iolist_size/1<br>iolist_to_binary/1                 iolist_to_iovec/1<br>is_alive/0                         is_atom/1<br>is_binary/1                        is_bitstring/1<br>is_boolean/1                       is_builtin/3<br>is_float/1                         is_function/1<br>is_function/2                      is_integer/1<br>is_list/1                          is_map/1<br>is_map_key/2                       is_number/1<br>is_pid/1                           is_port/1<br>is_process_alive/1                 is_record/2<br>is_record/3                        is_reference/1<br>is_tuple/1                         length/1<br>link/1                             list_to_atom/1<br>list_to_binary/1                   list_to_bitstring/1<br>list_to_existing_atom/1            list_to_float/1<br>list_to_integer/1                  list_to_integer/2<br>list_to_pid/1                      list_to_port/1<br>list_to_ref/1                      list_to_tuple/1<br>load_module/2                      load_nif/2<br>loaded/0                           localtime/0<br>localtime_to_universaltime/1       localtime_to_universaltime/2<br>make_fun/3                         make_ref/0<br>make_tuple/2                       make_tuple/3<br>map_get/2                          map_size/1<br>match_spec_test/3                  max/2<br>md5/1                              md5_final/1<br>md5_init/0                         md5_update/2<br>memory/0                           memory/1<br>min/2                              module_info/0<br>module_info/1                      module_loaded/1<br>monitor/2                          monitor_node/2<br>monitor_node/3                     monotonic_time/0<br>monotonic_time/1                   nif_error/1<br>nif_error/2                        node/0<br>node/1                             nodes/0<br>nodes/1                            now/0<br>open_port/2                        phash/2<br>phash2/1                           phash2/2<br>pid_to_list/1                      port_call/2<br>port_call/3                        port_close/1<br>port_command/2                     port_command/3<br>port_connect/2                     port_control/3<br>port_get_data/1                    port_info/1<br>port_info/2                        port_set_data/2<br>port_to_list/1                     ports/0<br>posixtime_to_universaltime/1       pre_loaded/0<br>prepare_loading/2                  process_display/2<br>process_flag/2                     process_flag/3<br>process_info/1                     process_info/2<br>processes/0                        purge_module/1<br>put/2                              raise/3<br>read_timer/1                       read_timer/2<br>ref_to_list/1                      register/2<br>registered/0                       resume_process/1<br>round/1                            self/0<br>send/2                             send/3<br>send_after/3                       send_after/4<br>send_nosuspend/2                   send_nosuspend/3<br>seq_trace/2                        seq_trace_info/1<br>seq_trace_print/1                  seq_trace_print/2<br>set_cookie/2                       set_cpu_topology/1<br>setelement/3                       setnode/2<br>setnode/3                          size/1<br>spawn/1                            spawn/2<br>spawn/3                            spawn/4<br>spawn_link/1                       spawn_link/2<br>spawn_link/3                       spawn_link/4<br>spawn_monitor/1                    spawn_monitor/3<br>spawn_opt/1                        spawn_opt/2<br>spawn_opt/3                        spawn_opt/4<br>spawn_opt/5                        split_binary/2<br>start_timer/3                      start_timer/4<br>statistics/1                       subtract/2<br>suspend_process/1                  suspend_process/2<br>system_flag/2                      system_info/1<br>system_monitor/0                   system_monitor/1<br>system_monitor/2                   system_profile/0<br>system_profile/2                   system_time/0<br>system_time/1                      term_to_binary/1<br>term_to_binary/2                   throw/1<br>time/0                             time_offset/0<br>time_offset/1                      timestamp/0<br>tl/1                               trace/3<br>trace_delivered/1                  trace_info/2<br>trace_pattern/2                    trace_pattern/3<br>trunc/1                            tuple_size/1<br>tuple_to_list/1                    unique_integer/0<br>unique_integer/1                   universaltime/0<br>universaltime_to_localtime/1       universaltime_to_posixtime/1<br>unlink/1                           unregister/1<br>whereis/1                          yield/0</p>
<p>application                          application_controller<br>application_master                   atomics<br>beam_lib                             binary<br>c                                    code<br>code_server                          counters<br>dict                                 edlin<br>edlin_expand                         epp<br>erl_abstract_code                    erl_anno<br>erl_distribution                     erl_eval<br>erl_lint                             erl_parse<br>erl_prim_loader                      erl_scan<br>erl_signal_handler                   erl_tracer<br>erlang                               error_handler<br>error_logger                         erts_code_purger<br>erts_dirty_process_signal_handler    erts_internal<br>erts_literal_area_collector          ets<br>file                                 file_io_server<br>file_server                          filename<br>gb_sets                              gb_trees<br>gen                                  gen_event<br>gen_server                           global<br>global_group                         group<br>group_history                        heart<br>hipe_unified_loader                  inet<br>inet_config                          inet_db<br>inet_gethost_native                  inet_parse<br>inet_udp                             init<br>io                                   io_lib<br>io_lib_format                        io_lib_pretty<br>kernel                               kernel_config<br>kernel_refc                          lists<br>logger                               logger_backend<br>logger_config                        logger_filters<br>logger_formatter                     logger_h_common<br>logger_handler_watcher               logger_server<br>logger_simple_h                      logger_std_h<br>logger_sup                           maps<br>net_kernel                           orddict<br>ordsets                              os<br>otp_ring0                            persistent_term<br>prim_buffer                          prim_eval<br>prim_file                            prim_inet<br>prim_zip                             proc_lib<br>proplists                            queue<br>ram_file                             raw_file_io<br>raw_file_io_raw                      rpc<br>sets                                 shell<br>standard_error                       string<br>supervisor                           supervisor_bridge<br>timer                                unicode<br>unicode_util                         user_drv<br>user_sup                             zlib</p>
<p>lists:<br>all/2          any/2          append/1       append/2       concat/1<br>delete/2      droplast/1     dropwhile/2    duplicate/2    filter/2<br>filtermap/2   flatlength/1   flatmap/2      flatten/1      flatten/2<br>foldl/3        foldr/3        foreach/2      join/2         keydelete/3<br>keyfind/3      keymap/3       keymember/3    keymerge/3     keyreplace/4<br>keysearch/3    keysort/2      keystore/4     keytake/3      last/1<br>map/2          mapfoldl/3     mapfoldr/3     max/1          member/2<br>merge/1        merge/2        merge/3        merge3/3       min/1<br>module_info/0  module_info/1  nth/2          nthtail/2      partition/2<br>prefix/2       reverse/1      reverse/2      rkeymerge/3    rmerge/2<br>rmerge/3       rmerge3/3      rukeymerge/3   rumerge/2      rumerge/3<br>rumerge3/3     search/2       seq/2          seq/3          sort/1<br>sort/2         split/2        splitwith/2    sublist/2      sublist/3<br>subtract/2     suffix/2       sum/1          takewhile/2    ukeymerge/3<br>ukeysort/2     umerge/1       umerge/2       umerge/3       umerge3/3<br>unzip/1        unzip3/1       usort/1        usort/2        zf/2<br>zip/2          zip3/3         zipwith/3      zipwith3/4     </p>
<p>string:<br>casefold/1         centre/2           centre/3           chars/2<br>chars/3            chomp/1            chr/2              concat/2<br>copies/2           cspan/2            equal/2            equal/3<br>equal/4            find/2             find/3             is_empty/1<br>join/2             left/2             left/3             len/1<br>length/1           lexemes/2          list_to_float/1    list_to_integer/1<br>lowercase/1        module_info/0      module_info/1      next_codepoint/1<br>next_grapheme/1    nth_lexeme/3       pad/2              pad/3<br>pad/4              prefix/2           rchr/2             replace/3<br>replace/4          reverse/1          right/2            right/3<br>rstr/2             slice/2            slice/3            span/2<br>split/2            split/3            str/2              strip/1<br>strip/2            strip/3            sub_string/2       sub_string/3<br>sub_word/2         sub_word/3         substr/2           substr/3<br>take/2             take/3             take/4             titlecase/1<br>to_float/1         to_graphemes/1     to_integer/1       to_lower/1<br>to_upper/1         tokens/2           trim/1             trim/2<br>trim/3             uppercase/1        words/1            words/2            </p>
<p>file:<br>advise/4                  allocate/3                altname/1<br>change_group/2            change_mode/2             change_owner/2<br>change_owner/3            change_time/2             change_time/3<br>close/1                   consult/1                 copy/2<br>copy/3                    copy_opened/3             datasync/1<br>del_dir/1                 delete/1                  eval/1<br>eval/2                    format_error/1            get_cwd/0<br>get_cwd/1                 ipread_s32bu_p32bu/3      ipread_s32bu_p32bu_int/3<br>list_dir/1                list_dir_all/1            make_dir/1<br>make_link/2               make_symlink/2            module_info/0<br>module_info/1             native_name_encoding/0    open/2<br>path_consult/2            path_eval/2               path_eval/3<br>path_open/3               path_script/2             path_script/3<br>pid2name/1                position/2                pread/2<br>pread/3                   pwrite/2                  pwrite/3<br>raw_read_file_info/1      raw_write_file_info/2     read/2<br>read_file/1               read_file_info/1          read_file_info/2<br>read_line/1               read_link/1               read_link_all/1<br>read_link_info/1          read_link_info/2          rename/2<br>script/1                  script/2                  sendfile/2<br>sendfile/5                set_cwd/1                 sync/1<br>truncate/1                write/2                   write_file/2<br>write_file/3              write_file_info/2         write_file_info/3         </p>
<p>sets:<br>add_element/2   del_element/2   filter/2        fold/3<br>from_list/1     intersection/1  intersection/2  is_disjoint/2<br>is_element/2    is_empty/1      is_set/1        is_subset/2<br>module_info/0   module_info/1   new/0           size/1<br>subtract/2      to_list/1       union/1         union/2</p>
<p>maps:<br>filter/2       find/2         fold/3         from_list/1    get/2<br>get/3          is_key/2       iterator/1     keys/1         map/2<br>merge/2        module_info/0  module_info/1  new/0          next/1<br>put/3          remove/2       size/1         take/2         to_list/1<br>update/3       update_with/3  update_with/4  values/1       with/2</p>
<p>binary:<br>at/2                     bin_to_list/1            bin_to_list/2<br>bin_to_list/3            compile_pattern/1        copy/1<br>copy/2                   decode_unsigned/1        decode_unsigned/2<br>encode_unsigned/1        encode_unsigned/2        first/1<br>last/1                   list_to_bin/1            longest_common_prefix/1<br>longest_common_suffix/1  match/2                  match/3<br>matches/2                matches/3                module_info/0<br>module_info/1            part/2                   part/3<br>referenced_byte_size/1   replace/3                replace/4<br>split/2                  split/3                  </p>
<p>ordsets:<br>add_element/2   del_element/2   filter/2        fold/3<br>from_list/1     intersection/1  intersection/2  is_disjoint/2<br>is_element/2    is_empty/1      is_set/1        is_subset/2<br>module_info/0   module_info/1   new/0           size/1<br>subtract/2      to_list/1       union/1         union/2  </p>
<p>orddict:<br>append/3          append_list/3     erase/2           fetch/2<br>fetch_keys/1      filter/2          find/2            fold/3<br>from_list/1       is_empty/1        is_key/2          map/2<br>merge/3           module_info/0     module_info/1     new/0<br>size/1            store/3           take/2            to_list/1<br>update/3          update/4          update_counter/3  </p>
<p>os:<br>cmd/1              cmd/2              find_executable/1  find_executable/2<br>get_env_var/1      getenv/0           getenv/1           getenv/2<br>getpid/0           list_env_vars/0    module_info/0      module_info/1<br>perf_counter/0     perf_counter/1     putenv/2           set_env_var/2<br>set_signal/2       system_time/0      system_time/1      timestamp/0<br>type/0             unset_env_var/1    unsetenv/1         version/0      </p>
<p> io:<br>columns/0          columns/1          format/1           format/2<br>format/3           fread/2            fread/3            fwrite/1<br>fwrite/2           fwrite/3           get_chars/2        get_chars/3<br>get_line/1         get_line/2         get_password/0     get_password/1<br>getopts/0          getopts/1          module_info/0      module_info/1<br>nl/0               nl/1               parse_erl_exprs/1  parse_erl_exprs/2<br>parse_erl_exprs/3  parse_erl_exprs/4  parse_erl_form/1   parse_erl_form/2<br>parse_erl_form/3   parse_erl_form/4   printable_range/0  put_chars/1<br>put_chars/2        read/1             read/2             read/3<br>read/4             request/1          request/2          requests/1<br>requests/2         rows/0             rows/1             scan_erl_exprs/1<br>scan_erl_exprs/2   scan_erl_exprs/3   scan_erl_exprs/4   scan_erl_form/1<br>scan_erl_form/2    scan_erl_form/3    scan_erl_form/4    setopts/1<br>setopts/2          write/1            write/2      </p>
<h2 id="Concurrent"><a href="#Concurrent" class="headerlink" title="Concurrent"></a>Concurrent</h2><p>   Pid = spawn(F)<br>   Pid ! Msg</p>
<p>   receive<br>    Msg1 [when Guard1] -&gt;<br>                Expr_seq1;<br>    Msg2 [when Guard2] -&gt;<br>        Expr_seq2;<br>        …<br>    MsgN [when GuardN] -&gt;<br>        Expr_seqN;<br>            …<br>    [; after TimeOutTime -&gt;<br>        Timeout_Expr_seq]<br>    end</p>
<h3 id="register"><a href="#register" class="headerlink" title="register"></a>register</h3><pre><code>register(Name, Pid)</code></pre><h3 id="err"><a href="#err" class="headerlink" title="err"></a>err</h3><pre><code>Val = (catch Expr)% {’EXIT’, _}
(catch F) % {’EXIT’,P}.
throw(Q)
exit(P)</code></pre><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Y = (<span class="keyword">catch</span> <span class="number">1</span>/<span class="number">0</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">sqrt</span><span class="params">(X)</span> <span class="title">when</span> X &lt; 0 -&gt;</span></span><br><span class="line">	    exit(&#123;sqrt,X&#125;);</span><br><span class="line"><span class="function"><span class="title">sqrt</span><span class="params">(X)</span> -&gt;</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">h</span><span class="params">(cat)</span> -&gt;</span> exit(dog);</span><br><span class="line"><span class="function"><span class="title">h</span><span class="params">(N)</span>-&gt;</span> <span class="number">10</span>*N.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">g</span><span class="params">(X)</span> -&gt;</span></span><br><span class="line">   <span class="keyword">case</span> (<span class="keyword">catch</span> h(X)) <span class="keyword">of</span></span><br><span class="line">      &#123;’EXIT’, _&#125; -&gt; <span class="number">10</span>;</span><br><span class="line">      Val -&gt;  Val</span><br><span class="line">   <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

<h3 id="Process-links"><a href="#Process-links" class="headerlink" title="Process links"></a>Process links</h3><pre><code>in process A
B = spawn_link(fun() -&gt; ... end), % {’EXIT’,Why} -&gt; {’EXIT’,P,Why}</code></pre><h2 id="ERROR-HANDLING"><a href="#ERROR-HANDLING" class="headerlink" title="ERROR HANDLING"></a>ERROR HANDLING</h2><pre><code>Ref = erlang:monitor(process, B) % {’DOWN’, Ref, process, B, Why} -&gt; A</code></pre><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">start</span><span class="params">()</span> -&gt;</span> spawn(fun go/0).</span><br><span class="line"><span class="function"><span class="title">go</span><span class="params">()</span> -&gt;</span></span><br><span class="line">     process_flag(trap_exit, true),</span><br><span class="line">     loop().</span><br><span class="line">     </span><br><span class="line"><span class="function"><span class="title">loop</span><span class="params">()</span> -&gt;</span></span><br><span class="line">       <span class="keyword">receive</span></span><br><span class="line">		&#123;’EXIT’,P,Why&#125; -&gt; <span class="comment">% kill</span></span><br><span class="line">		... handle the error ...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h1 id="Distributed"><a href="#Distributed" class="headerlink" title="Distributed"></a>Distributed</h1><h2 id="PORTS"><a href="#PORTS" class="headerlink" title="PORTS"></a>PORTS</h2><p>   spawn(Fun,Node)<br>   monitor(Node)<br>   P ! {Con, Command}<br>   {Port,{data,D}}</p>
<p>Command<br>   {command,Data}   %<br>   close        % {P,closed}<br>   {connect,Pid1}   % {Port,connected}</p>
<h2 id="DYNAMIC-CODE-CHANGE"><a href="#DYNAMIC-CODE-CHANGE" class="headerlink" title="DYNAMIC CODE CHANGE"></a>DYNAMIC CODE CHANGE</h2><p>   tail-calls -&gt; no old code to return -&gt; all old code for a module can safely be deleted.</p>
   <figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(m)</span>.  <span class="comment">%% 1.load/reload m</span></span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="title">loop</span><span class="params">(Data, F)</span> -&gt;</span></span><br><span class="line"><span class="keyword">receive</span></span><br><span class="line">	&#123;From, Q&#125; -&gt;</span><br><span class="line">	&#123;Reply, Data1&#125; = F(Q, Data),</span><br><span class="line">	m:loop(data1, F)  <span class="comment">%% 2.loop m</span></span><br><span class="line"><span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(m)</span>.  <span class="comment">%% load/reload m</span></span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="title">loop</span><span class="params">(Data, F)</span> -&gt;</span></span><br><span class="line"><span class="keyword">receive</span></span><br><span class="line">	&#123;From, Q&#125; -&gt;</span><br><span class="line">		&#123;Reply, Data1&#125; = F(Q, Data),</span><br><span class="line">		loop(data1, F)</span><br><span class="line"><span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

<h1 id="A-type-notation"><a href="#A-type-notation" class="headerlink" title="A type notation"></a>A type notation</h1><p>+type file:open(fileName(), read | write) -&gt;<br>      {ok, fileHandle()}<br>      | {error, string()}.<br>+type file:read_line(fileHandle()) -&gt;<br>      {ok, string()}<br>      | eof.<br>+type file:close(fileHandle()) -&gt;<br>      true.<br>+deftype fileName() = [int()]<br>+deftype string() = [int()].<br>+deftype fileHandle() = pid().</p>
<p>int()— is the integer type.<br>atom() — is the atom type.<br>pid() — is the Pid type.<br>ref() — is the reference type.<br>float() — is the Erlang float type.<br>port() — is the port type.<br>bin() — is the binary type.</p>
<p>List, tuple and alternation types are defined recursively:</p>
<p>{X1,X2,…,Xn}  {T1,T2,…,Tn}<br>[X1,X2,…,Xn]  [T]<br>T1|T2</p>
<p>+deftype name1() = name2() = … = Type.<br>+deftype bool()= true | false.<br>+deftype weekday() = monday|tuesday|wednesday|thursday|friday.<br>+deftype weekend() = saturday() | sunday().<br>+deftype day()= weekday() | weekend().</p>
<p>+type fn(T1, T2, …, Tn) -&gt; T.</p>
<p>+deftype string() = [int()].<br>+deftype day()= number() = int().<br>+deftype town()= street() = string().<br>+type factorial(int()) -&gt; int().<br>+type day2int(day())-&gt; int().<br>+type address(person()) -&gt; {town(), street(), number()}.</p>
<p>+type fun(T1, T2, …, Tn) -&gt; T end<br>+type map(fun(X) -&gt; Y end, [X]) -&gt; [Y].</p>
<h1 id="PROGRAMMING-TECHNIQUES"><a href="#PROGRAMMING-TECHNIQUES" class="headerlink" title="PROGRAMMING TECHNIQUES"></a>PROGRAMMING TECHNIQUES</h1><p>server –reply–&gt; clients<br>server &lt;-query– clients</p>
<p>{State1, Reply} = F(Query, State)</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">-module</span><span class="params">(server1)</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([start/<span class="number">3</span>, stop/<span class="number">1</span>, rpc/<span class="number">2</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">start</span><span class="params">(Name, F, State)</span> -&gt;</span></span><br><span class="line">	    register(Name, spawn(<span class="keyword">fun</span>() -&gt; loop(Name, F, State) <span class="keyword">end</span>)).</span><br><span class="line"><span class="function"><span class="title">stop</span><span class="params">(Name)</span> -&gt;</span>Name ! stop.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">rpc</span><span class="params">(Name, Query)</span> -&gt;</span></span><br><span class="line">	  Name ! &#123;self(), Query&#125;,  <span class="comment">%c-&gt;s</span></span><br><span class="line">	  <span class="keyword">receive</span></span><br><span class="line">	  	  &#123;Name, Reply&#125; -&gt; Reply</span><br><span class="line">	  <span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">loop</span><span class="params">(Name, F, State)</span> -&gt;</span></span><br><span class="line">	   <span class="keyword">receive</span></span><br><span class="line">		 stop -&gt; void;</span><br><span class="line">	   &#123;Pid, Query&#125; -&gt;    <span class="comment">% s-&gt;s</span></span><br><span class="line">	   	   &#123;Reply, State1&#125; = F(Query, State),</span><br><span class="line">		   Pid ! &#123;Name, Reply&#125;,</span><br><span class="line">		   loop(Name, F, State1)   <span class="comment">%% tail </span></span><br><span class="line"><span class="keyword">end</span>.</span><br></pre></td></tr></table></figure>

<p> vshlr1:start().<br> vshlr1:find(“joe”).<br> vshlr1:i_am_at(“joe”, “sics”).<br> vshlr1:find(“joe”).</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">-module</span><span class="params">(vshlr1)</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([start/<span class="number">0</span>, stop/<span class="number">0</span>, handle_event/<span class="number">2</span>,i_am_at/<span class="number">2</span>, find/<span class="number">1</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-import</span><span class="params">(server1, [start/<span class="number">3</span>, stop/<span class="number">1</span>, rpc/<span class="number">2</span>])</span>.</span><br><span class="line"><span class="keyword">-import</span><span class="params">(dict,[new/<span class="number">0</span>, store/<span class="number">3</span>, find/<span class="number">2</span>])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">start</span><span class="params">()</span> -&gt;</span> start(vshlr, fun handle_event/2, new()).</span><br><span class="line"><span class="function"><span class="title">stop</span><span class="params">()</span> -&gt;</span> stop(vshlr).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">i_am_at</span><span class="params">(Who, Where)</span> -&gt;</span>rpc(vshlr, &#123;i_am_at, Who, Where&#125;).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">find</span><span class="params">(Who)</span> -&gt;</span>rpc(vshlr, &#123;find, Who&#125;).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handle_event</span><span class="params">(&#123;i_am_at, Who, Where&#125;, Dict)</span> -&gt;</span> &#123;ok, store(Who, Where, Dict)&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">handle_event</span><span class="params">(&#123;find, Who&#125;, Dict)</span> -&gt;</span> &#123;find(Who, Dict), Dict&#125;.</span><br></pre></td></tr></table></figure>

<p>A simple server with error recovery.</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">-module</span><span class="params">(server2)</span>.</span><br><span class="line"><span class="keyword">-export</span><span class="params">([start/<span class="number">3</span>, stop/<span class="number">1</span>, rpc/<span class="number">2</span>])</span>.</span><br><span class="line"><span class="function"><span class="title">start</span><span class="params">(Name, F, State)</span> -&gt;</span></span><br><span class="line">register(Name, spawn(<span class="keyword">fun</span>() -&gt; loop(Name,F,State) <span class="keyword">end</span>)).</span><br><span class="line"><span class="function"><span class="title">stop</span><span class="params">(Name)</span> -&gt;</span> Name ! stop.</span><br><span class="line"><span class="function"><span class="title">rpc</span><span class="params">(Name, Query)</span> -&gt;</span>Name ! &#123;self(), Query&#125;,</span><br><span class="line"></span><br><span class="line"><span class="keyword">receive</span></span><br><span class="line">	&#123;Name, crash&#125; -&gt; exit(rpc);</span><br><span class="line">	&#123;Name, ok, Reply&#125; -&gt; Reply</span><br><span class="line"><span class="keyword">end</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">loop</span><span class="params">(Name, F, State)</span> -&gt;</span></span><br><span class="line">	   <span class="keyword">receive</span></span><br><span class="line">	   	   stop -&gt; void;</span><br><span class="line">		   &#123;From, Query&#125; -&gt;</span><br><span class="line">		   	  <span class="keyword">case</span> (<span class="keyword">catch</span> F(Query, State)) <span class="keyword">of</span></span><br><span class="line">			       &#123;’EXIT’, Why&#125; -&gt;</span><br><span class="line">			       		  log_error(Name, Query, Why),</span><br><span class="line">			       		  From ! &#123;Name, crash&#125;,</span><br><span class="line">					  loop(Name, F, State);</span><br><span class="line">			       &#123;Reply, State1&#125; -&gt;</span><br><span class="line">			       	          From ! &#123;Name, ok, Reply&#125;,</span><br><span class="line">					  loop(Name, F, State1)</span><br><span class="line">			  <span class="keyword">end</span></span><br><span class="line">	 <span class="keyword">end</span>.</span><br><span class="line"><span class="function"><span class="title">log_error</span><span class="params">(Name, Query, Why)</span> -&gt;</span>io:format(<span class="string">"Server ~p query ~p caused exception ~p~n"</span>,[Name, Query, Why]).</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://birdsofsummer.github.io/2020/01/10/erl/" data-id="ck580fkst002w81mcn3fpa08q" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/01/10/github-action/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          github-action
        
      </div>
    </a>
  
  
    <a href="/2020/01/10/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/async/">async</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/db/">db</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/db/mongo/">mongo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/db/redis/">redis</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/design/">design</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/design/color/">color</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/task/">task</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/callback/">callback</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/color/">color</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ddd/">ddd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design/">design</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphql/">graphql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/promise/">promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/async/" style="font-size: 10px;">async</a> <a href="/tags/callback/" style="font-size: 10px;">callback</a> <a href="/tags/color/" style="font-size: 10px;">color</a> <a href="/tags/ddd/" style="font-size: 10px;">ddd</a> <a href="/tags/design/" style="font-size: 10px;">design</a> <a href="/tags/graphql/" style="font-size: 10px;">graphql</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/nodejs/" style="font-size: 20px;">nodejs</a> <a href="/tags/promise/" style="font-size: 10px;">promise</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/10/zz/">zz</a>
          </li>
        
          <li>
            <a href="/2020/01/10/tttt/">tttt</a>
          </li>
        
          <li>
            <a href="/2020/01/10/github-action/">github-action</a>
          </li>
        
          <li>
            <a href="/2020/01/10/erl/">(no title)</a>
          </li>
        
          <li>
            <a href="/2020/01/10/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Qing<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>